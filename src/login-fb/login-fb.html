 <link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-app.html">
<link rel="import" href="../../bower_components/polymerfire/firebase-auth.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">

<dom-module id="login-fb">
  <template>
    <style>
      :host {
        display: block;
      }
      paper-button {
          background-color: deepskyblue;
      }
    </style>
    
    <firebase-app id="myFireApp"
                  name="imdb"
                  api-key="AIzaSyB8kuGtgnbvN5imJSBltSfAT1nNbiNrhSU"
                  auth-domain="cis371-semprj.firebaseapp.com"
                  database-url="https://cis371-semprj.firebaseio.com" 
                  storage-bucket="cis371-semprj.appspot.com" 
                  messaging-sender-id="860536671337"
                  project-id="cis371-semprj">
    </firebase-app>
      
    <firebase-auth id="fbauth" app-name="imdb" provider="google"></firebase-auth>
    
    <div id="loginItems">
        <h2></h2>
        <paper-button raised on-click="doLogin">Login with Google</paper-button>
    </div>
      
    <div id="welcome"></div>

  </template>
    
  <script src="http://code.jquery.com/jquery-1.9.1.js"></script>
  <script>
    /**
     * @customElement
     * @polymer
     */
    class LoginFb extends Polymer.Element {
      static get is() { return 'login-fb'; }
      static get properties() {
        return {
          prop1: {
            type: String,
            value: 'login-fb'
          }
        };
      }
        
      $("#welcome").hide();
        
      doLogin() {
        this.$.fbauth.signInWithPopup().then( result => {
            $("#loginItems").hide();
            $("#welcome").html("<h2>Welcome " + result.user.displayName + "</h2>");
            $("#welcome").show();
//            alert("User is " + result.u b      ser.displayName);
        });
      }
        
    }
    window.customElements.define(LoginFb.is, LoginFb);
  </script>
</dom-module>
